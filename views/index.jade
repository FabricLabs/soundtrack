extends layout

block content

  #stage
    .row-fluid
      .span3
        #current-track.card
          //h2#track-title #{room.playlist[0].title}
          h5#track-title foo
          #track-progress.progress.progress-striped.active
            .bar(style="width: 0%;")
          span#time 00:00

        .card.row-fluid
          .span3
            a.btn(href="#", data-action="toggle-volume", data-intro="<h5>Welcome to soundtrack.io!</h5>  Since you're new and we're polite, we've muted the sound.  You can turn it on here.", data-step="1", data-position="right")
              i.icon-volume-up
          .span9
            input.slider(type="text", name="volume", value="80", data-slider-min="0", data-slider-max="100", data-slider-value="80")

        if (user)
          a.btn(href="#", onclick="$.post('/skip'); return false;") skip
          a.btn.btn-mini.pull-right(href="#playlist-modal", data-toggle="modal") your playlists

        #playlist.card
          h3#playlist-summary
            | Playlist
          ul#playlist-list(data-intro="If the playlist ever reaches zero, soundtrack.io will automatically choose song based on what's been played in the past.", data-step="3", data-position="right")

        .card
          h3 Add Track
          form#search-form
            if (user)
              input.input-block-level(type="text", placeholder="type here and press [ENTER] to search", data-intro="<h5>Queue a song!</h5>Search here for a track to add it to the playlist.", data-step="2", data-position="right")#search-query
            else
              input.input-block-level(type="text", disabled, placeholder="you must be registered to do this!", data-intro="<h5>Queue a song!</h5>Search here for a track to add it to the playlist.", data-step="2", data-position="top")#search-query
            #search-results

      .span6
        #screen-one
          .screen-inner#screen-inner

        #audience
          h3 Users
          #userlist(data-intro="<h5>One last thing...</h5>We're a work in progress, so you'll have to mind your step.  Until we implement AngularJS, you'll have to middle-click or ctrl+click these links to prevent them from interrupting the music.  Other than that, <strong>please enjoy!</strong>", data-step="5", data-position="top")

      #decks
        #slot-1
        #slot-2
        #slot-3
        #slot-4
        #slot-5

      .span3.card(data-intro="<h5>Music is social!</h5>You can chat with all the other listeners here.  They're listening to the same exact music, at the same time!", data-step="4", data-position="left")
        h3
          small.pull-right.user-count
          | Chat
        #messages
          each message in messages
            include partials/message
        form#chat-form
          if (user)
            input.input-block-level(type="text", autocomplete="off", placeholder="click here to join the conversation")#chat-input
          else
            input.input-block-level(type="text", autocomplete="off", disabled, placeholder="click here to join the conversation")#chat-input

  if (!user)
    script.
      registered = false;
  else
    script.
      registered = true;

    #playlist-modal.modal.hide.fade
      .modal-header
        button.close(data-dismiss="modal") &times;
        h3 Your Playlists
      .modal-body
        h2 lol, not yet

      .modal-footer
        button.btn.btn(data-dismiss="modal") Cancel
        button.btn.btn-primary.btn-large(data-dismiss="modal") Done
